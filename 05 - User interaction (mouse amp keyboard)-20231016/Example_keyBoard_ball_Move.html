<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <title>INTERACTIONS (keyboard)</title>
</head>

<body>
    <canvas id="c1" width="300" height="250" style="border:solid 1px green">
        Your browser does not support HTML5 Canvas.
    </canvas>

    <script>
        /** @type {HTMLCanvasElement} */
        const canvas1 = document.querySelector('#c1');
        const ctx1 = canvas1.getContext("2d");

        var keyPressed = ""

        let x = canvas1.width/2; console.log(x)
        let y = canvas1.height/2; console.log(y)

        var vel = 1;var vxl = 0; var vxr = 0; var vy = 0

        window.addEventListener("keydown", function(event) 
        {
            console.log(event.code)
            if (event.code === "KeyW") 
            {
                vy = -1 * vel; console.log(vy)
            }
            else if (event.code === "KeyA")
            {
                vxl = -1 * vel; console.log(vxl)
            }
            else if (event.code === "KeyS")
            {
                vy = 1 * vel; console.log(vy)
            }
            else if (event.code === "KeyD")
            {
                vxr = 1 * vel; console.log(vxr)
            }
        })
    
        window.addEventListener("keyup", function(event) 
        {
            console.log(event.code)
            if (event.code === "KeyW") 
            {
                vy = 0
            }
            else if (event.code === "KeyA")
            {
                vxl = 0
            }
            else if (event.code === "KeyS")
            {
                vy = 0
            }
            else if (event.code === "KeyD")
            {
                vxr = 0
            }
        })

        //ANIMATION CYCLE
        function render() {
            console.log("render")
            ctx1.clearRect(0, 0,canvas1.width, canvas1.height)

            x += (vxr + vxl)
            y += vy

            console.log(`x: ${x}, y: ${y}`)

            ctx1.beginPath()
            ctx1.arc(x, y, 10, 0, Math.PI * 2, true)
            ctx1.stroke()
            ctx1.closePath()

            //new frame
            window.requestAnimationFrame(render);
        }
        render()

    </script>
</body>

</html>